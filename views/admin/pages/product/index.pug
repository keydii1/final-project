extends ../../layouts/default.pug
include ../../mixins/fillerStatus.pug
include ../../mixins/search.pug
include ../../mixins/pagination.pug

block main
  .container.mt-4
    h2.mb-4 Danh sách sản phẩm

    // Bộ lọc và Tìm kiếm
    .mb-3
      +search(keyword)

    +fillerStatus(fillterStatus)

    // Form thay đổi trạng thái
    .d-flex.align-items-start
      .form-group
        select(name="type" class="form-control")
          option(value="active") Hoạt động
          option(value="inactive") Dừng hoạt động

      .form-group
        input(
          type="text"
          name="ids"
          value=""
          class="form-control"
        )

      button(type="submit" class="btn btn-primary") Áp dụng

    // Bảng danh sách sản phẩm
    table.table.table-bordered.table-striped
      thead
        tr
          th STT
          th Hình ảnh
          th Tiêu đề
          th Giá
          th Trạng thái
          th Hành động
      tbody
        each item, index in products
          tr
            td #{index + 1}
            td
              img(src=item.thumbnail, alt="Sản phẩm", width="100", height="auto")
            td #{item.title}
            td #{item.price}$
            td
              if item.status == 'active'
                a(
                  href="javascript:;"
                  data-status="active"
                  data-id=item.id
                  button-change-status
                  class="badge badge-success"
                ) Hoạt động
              else
                a(
                  href="javascript:;"
                  data-status="inactive"
                  data-id=item.id
                  button-change-status
                  class="badge badge-danger"
                ) Dừng hoạt động
            td
              button.btn.btn-warning.btn-sm Sửa
              button.btn.btn-danger.btn-sm.ml-1 Xoá

    // Pagination
    +paginationMixin(pagination)

    // Form hidden để change status
    form(
      action=""
      method="POST"
      id="form-change-status"
      data-path=`${prefixAdmin}/products/change-status`
    )

    script(src="/admin/js/products.js")
