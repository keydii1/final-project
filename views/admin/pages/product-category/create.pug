extends ../../layouts/default.pug
include ../../mixins/alert.pug
include ../../mixins/select-tree.pug

block main
    if role.permissions.includes("products-category_create")
        +alert-error("2000")
        .container.mt-4
            h2.mb-4 Tạo mới danh mục sản phẩm
            form(
                action=`${prefixAdmin}/product-category/create` 
                method="POST" 
                enctype="multipart/form-data"
            )
                // Tiêu đề
                .form-group
                    label(for="title") Tiêu đề
                    input#title.form-control(
                        type="text" 
                        name="title" 
                        placeholder="Nhập tiêu đề danh mục"
                        required
                    )
                
                // Danh mục cha
                
                .form-group
                    label(for="parent_id") Danh mục cha
                    select#parent_id.form-control(name="parent_id")
                        option(value="") -- Chọn danh mục cha --
                        if record && record.length > 0
                            +select-tree(record)
                // Hình ảnh
                .form-group(data-upload-image)
                    label(for="thumbnail") Hình ảnh
                    input#thumbnail.form-control(
                        type="file" 
                        name="thumbnail" 
                        accept="image/*"
                        data-upload-image-input
                    )
                    img.image-preview(
                        src="" 
                        alt="Preview"
                        style="max-width: 200px; margin-top: 10px; display: none;"
                        data-upload-image-preview
                    )

                // Vị trí
                .form-group
                    label(for="position") Vị trí
                    input#position.form-control(
                        type="number" 
                        name="position" 
                        placeholder="Để trống để tự động sắp xếp"
                    )

                // Trạng thái
                .form-group
                    label(for="status") Trạng thái
                    select#status.form-control(name="status" required)
                        option(value="active") Kích hoạt
                        option(value="inactive") Vô hiệu hóa

                // Nút submit
                .form-group
                    button.btn.btn-primary(type="submit") Tạo danh mục
                    a.btn.btn-secondary.ml-2(href=`${prefixAdmin}/product-category`) Hủy
    else
        h1 Bạn chưa được cấp quyền thêm danh mục sản phẩm, vui lòng liên hệ quản trị viên